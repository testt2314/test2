<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Currency Converter Settings</title>
  <style>
    body {
      width: 380px;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      margin: 0;
    }
    
    .header {
      text-align: center;
      margin-bottom: 20px;
    }
    
    .title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
      margin-bottom: 5px;
    }
    
    .subtitle {
      font-size: 12px;
      color: #666;
    }
    
    .setting-group {
      margin-bottom: 20px;
    }
    
    .setting-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #333;
    }
    
    .currency-select {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      background: white;
    }
    
    .currency-select:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    .api-input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      background: white;
      font-family: Monaco, 'Lucida Console', monospace;
      box-sizing: border-box;
    }
    
    .api-input:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
    }

    .checkbox-group {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 8px;
    }

    .checkbox-input {
      width: 16px;
      height: 16px;
      margin: 0;
    }

    .checkbox-label {
      margin: 0;
      font-weight: normal;
      cursor: pointer;
      font-size: 13px;
      line-height: 1.4;
    }

    .setting-description {
      font-size: 11px;
      color: #888;
      margin-top: 4px;
      line-height: 1.3;
    }
    
    .save-button {
      width: 100%;
      padding: 10px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .save-button:hover {
      background: #0056b3;
    }
    
    .save-button:active {
      background: #004085;
    }
    
    .refresh-rates-button {
      width: 100%;
      padding: 8px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 10px;
    }
    
    .refresh-rates-button:hover {
      background: #218838;
    }
    
    .refresh-rates-button:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }

    .clear-cache-button {
      width: 100%;
      padding: 8px;
      background: #dc3545;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background-color 0.2s;
      margin-top: 8px;
    }
    
    .clear-cache-button:hover {
      background: #c82333;
    }

    .cache-info {
      margin-top: 15px;
      padding: 10px;
      background: #e9ecef;
      border-radius: 6px;
      font-size: 12px;
      color: #495057;
      line-height: 1.4;
      border: 1px solid #dee2e6;
    }
    
    .status-message {
      margin-top: 10px;
      padding: 8px;
      border-radius: 4px;
      text-align: center;
      font-size: 13px;
      display: none;
    }
    
    .status-success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .instructions {
      margin-top: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
      font-size: 12px;
      color: #666;
      line-height: 1.4;
    }
    
    .instructions h4 {
      margin: 0 0 8px 0;
      color: #333;
      font-size: 13px;
    }

    .usage-steps {
      margin: 8px 0;
      padding-left: 0;
    }

    .usage-steps li {
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="title">Currency Converter</div>
    <div class="subtitle">Context menu currency conversion</div>
  </div>
  
  <div class="setting-group">
    <label class="setting-label" for="targetCurrency">Target Currency:</label>
    <select id="targetCurrency" class="currency-select">
      <option value="MYR">MYR - Malaysian Ringgit</option>
      <option value="USD">USD - US Dollar</option>
      <option value="EUR">EUR - Euro</option>
      <option value="GBP">GBP - British Pound</option>
      <option value="JPY">JPY - Japanese Yen</option>
      <option value="SGD">SGD - Singapore Dollar</option>
      <option value="AUD">AUD - Australian Dollar</option>
      <option value="CNY">CNY - Chinese Yuan</option>
      <option value="THB">THB - Thai Baht</option>
      <option value="IDR">IDR - Indonesian Rupiah</option>
      <option value="KRW">KRW - South Korean Won</option>
      <option value="HKD">HKD - Hong Kong Dollar</option>
      <option value="INR">INR - Indian Rupee</option>
    </select>
  </div>

  <div class="setting-group">
    <label class="setting-label" for="apiUrl">Exchange Rate API URL:</label>
    <input type="text" id="apiUrl" class="api-input" placeholder="https://wise.com/rates/live">
    <div class="setting-description">
      API endpoint for fetching exchange rates. Use {source} and {target} as placeholders or format as: ?source={source}&target={target}
    </div>
  </div>

  <div class="setting-group">
    <label class="setting-label">Source Currency Detection:</label>
    <div class="checkbox-group">
      <input type="checkbox" id="autoDetectSource" class="checkbox-input">
      <label for="autoDetectSource" class="checkbox-label">
        Auto-detect source currency from symbols and text
      </label>
    </div>
    <div class="setting-description">
      When enabled, automatically detects currency from symbols ($, ‚Ç¨, ¬£) and text (USD, EUR, etc.). 
      When disabled, always shows a currency selector.
    </div>
  </div>
  
  <button id="saveButton" class="save-button">Save Settings</button>
  
  <button id="refreshRatesButton" class="refresh-rates-button">üîÑ Refresh All Rates Now</button>
  
  <button id="clearCacheButton" class="clear-cache-button">üóëÔ∏è Clear Rate Cache</button>
  
  <div id="statusMessage" class="status-message"></div>
  
  <div id="cacheInfo" class="cache-info">
    Loading cache information...
  </div>
  
  <div class="instructions">
    <h4>How to use:</h4>
    <ol class="usage-steps">
      <li>Select any number or currency amount on any webpage</li>
      <li>Right-click and choose "Convert Currency"</li>
      <li>If auto-detect is ON: automatically converts detected currency</li>
      <li>If auto-detect is OFF: shows currency selector first</li>
      <li>View conversion result with live exchange rates</li>
    </ol>
    <strong>Rate Caching:</strong> Exchange rates are cached browser-wide for 24 hours. Rates are shared across all tabs and persist when browser restarts. Use "Refresh All Rates" to force update all cached rates, or "Clear Rate Cache" to remove all cached data.
  </div>
  
  <script src="options.js"></script>
</body>
</html>